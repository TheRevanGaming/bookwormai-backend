<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Book Worm AI</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static/script.js" defer></script>
</head>

<body>
<div id="app">
    <header id="top-header">
        <div class="brand">
            <img src="/static/bookworm-192.png" class="logo" alt="Book Worm AI logo" />
            <div class="brand-text">
                <h1>Book Worm AI</h1>
                <p class="tagline">AAA Storytelling · Game Dev · Music · Language Lab</p>
            </div>
        </div>
        <div class="owner-status">
            <span id="owner-badge">Guest Mode</span>
        </div>
    </header>

    <nav id="tab-bar">
        <button data-tab="chat" class="active">Chat</button>
        <button data-tab="book">Book Writing</button>
        <button data-tab="game">Game Dev</button>
        <button data-tab="language">Language Lab</button>
        <button data-tab="music">Music / Audio</button>
        <button data-tab="projects">Projects</button>
        <button data-tab="owner">Admin</button>
        <button data-tab="analytics">Analytics</button>
    </nav>

    <main id="main-panels">
        <!-- CHAT TAB -->
        <section id="chat" class="tab active">
            <h2>Chat / Lore / Free Exploration</h2>
            <p class="tab-hint">
                General conversation, lore help, ideas, and mixed tasks.
            </p>
            <textarea id="chat-input" class="input-area" placeholder="Ask anything..."></textarea>
            <div class="controls-row">
                <select id="chat-depth">
                    <option value="deep" selected>Deep</option>
                    <option value="super_deep">Super Deep</option>
                </select>
                <button onclick="sendChat()">Generate</button>
            </div>
            <div id="chat-output" class="output-area"></div>
        </section>

        <!-- BOOK WRITING TAB -->
        <section id="book" class="tab">
            <h2>Book Writing Suite</h2>
            <p class="tab-hint">
                Long-form narrative, chapters, scenes, and structural planning.
            </p>
            <textarea id="book-input" class="input-area" placeholder="Describe what you want to write next..."></textarea>
            <div class="controls-row">
                <select id="book-depth">
                    <option value="deep" selected>Deep</option>
                    <option value="super_deep">Super Deep</option>
                </select>
                <button onclick="sendBook()">Generate</button>
            </div>
            <div id="book-output" class="output-area"></div>
        </section>

        <!-- GAME DEV TAB -->
        <section id="game" class="tab">
            <h2>Game Development Lab</h2>
            <p class="tab-hint">
                AAA systems, levels, bosses, mechanics, progression, combat, and more.
            </p>
            <textarea id="game-input" class="input-area" placeholder="Describe the system, boss, or level you want to design..."></textarea>
            <div class="controls-row">
                <select id="game-depth">
                    <option value="deep" selected>Deep</option>
                    <option value="super_deep">Super Deep</option>
                </select>
                <button onclick="sendGame()">Generate</button>
            </div>
            <div id="game-output" class="output-area"></div>
        </section>

        <!-- LANGUAGE LAB TAB -->
        <section id="language" class="tab">
            <h2>Language Lab</h2>
            <p class="tab-hint">
                Build visual + spoken languages: alphabets, phonetics, grammar, phrases.
            </p>
            <textarea id="language-input" class="input-area" placeholder="Explain the vibe of the language you want to create..."></textarea>
            <div class="controls-row">
                <select id="language-depth">
                    <option value="deep" selected>Deep</option>
                    <option value="super_deep">Super Deep</option>
                </select>
                <button onclick="sendLanguage()">Generate</button>
            </div>
            <div id="language-output" class="output-area"></div>
        </section>

        <!-- MUSIC / AUDIO TAB -->
        <section id="music" class="tab">
            <h2>Music / Audio Lab</h2>
            <p class="tab-hint">
                Lyrics, OST concepts, ambience, SFX directions, and vocal ideas.
            </p>
            <textarea id="music-input" class="input-area" placeholder="Describe the track, mood, or SFX you want..."></textarea>
            <div class="controls-row">
                <select id="music-depth">
                    <option value="deep" selected>Deep</option>
                    <option value="super_deep">Super Deep</option>
                </select>
                <button onclick="sendMusic()">Generate</button>
            </div>
            <div id="music-output" class="output-area"></div>
        </section>

        <!-- PROJECTS TAB -->
        <section id="projects" class="tab">
            <h2>Projects</h2>
            <p class="tab-hint">
                Manage separate universes: each with its own canon, vectors, and labs.
            </p>
            <div id="project-controls">
                <input id="project-name" placeholder="New project name..." />
                <input id="project-desc" placeholder="Short description..." />
                <button onclick="createProject()">Create Project</button>
            </div>
            <div id="project-list" class="output-area"></div>
        </section>

        <!-- ADMIN TAB -->
        <section id="owner" class="tab">
            <h2>Admin Mode</h2>
            <p class="tab-hint">
                Owner tools, no limits. Enter your owner code once to unlock everything.
            </p>

            <div id="owner-auth-box">
                <input id="owner-code-input" type="password" placeholder="Enter owner code..." />
                <button onclick="setOwnerCode()">Unlock Admin</button>
            </div>

            <div id="owner-output" class="output-area"></div>
        </section>

        <!-- ANALYTICS TAB -->
        <section id="analytics" class="tab">
            <h2>Analytics Dashboard</h2>
            <p class="tab-hint">
                Live overview of generations, errors, and usage over time.
            </p>

            <div class="analytics-grid">
                <!-- Summary card -->
                <div class="analytics-card">
                    <h3>Summary</h3>
                    <button onclick="loadAnalyticsSummary()">Refresh Summary</button>
                    <div id="analytics-summary" class="analytics-summary-body">
                        <p>Loading...</p>
                    </div>
                </div>

                <!-- Charts card -->
                <div class="analytics-card">
                    <h3>Events by Type</h3>
                    <canvas id="eventsByTypeChart" width="400" height="240"></canvas>
                </div>

                <div class="analytics-card">
                    <h3>Last 24h Activity</h3>
                    <canvas id="eventsTimelineChart" width="400" height="240"></canvas>
                </div>
            </div>

            <div class="analytics-card wide">
                <div class="analytics-header-row">
                    <h3>Recent Events</h3>
                    <button onclick="loadRecentEvents()">Refresh Events</button>
                </div>
                <div id="analytics-events" class="analytics-events-body">
                    <p>Loading...</p>
                </div>
            </div>
        </section>
    </main>
</div>
</body>
</html>
